<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <h:head>
        <h:outputText value="#{bundle.Title}"></h:outputText>
        <h:outputStylesheet library="css" name="custom.css"/>
        <h:outputScript library="js" name="gestione_pratiche.js"/>
    </h:head>

    <p:growl id="growl" life="3000" showSummary="true" showDetail="true"/>
    <p:layout fullPage="true">
        <p:layoutUnit id="north" position="north">
            <h:form>
                <p:panelGrid columns="3" style="padding-left: 1em;vertical-align: auto;">
                    <p:outputLabel for="themebasic" value="Tema: " />
                    <p:themeSwitcher  effectSpeed="normal" effect="fade" 
                                      value="#{themeSwitcherView.theme}"
                                      id="themebasic" style="width:auto"
                                      >
                        <f:selectItem itemLabel="Choose Theme" itemValue="" />
                        <f:selectItems value="#{themeSwitcherView.themes}"
                                       var="theme" itemLabel="#{theme.displayName}" 
                                       itemValue="#{theme.name}"                                   
                                       />
                        <p:ajax listener="#{themeSwitcherView.saveTheme}"/>
                    </p:themeSwitcher>
                    <p style="font-size: 0.80em;"> <b>PER INIZIARE:</b> Parti dal menu <i>Auto-articolati -> Cerca...</i> qui sotto nel menu 
                        per cercare l'auto-articolato e caricare le sue pratiche.</p>
                </p:panelGrid>
            </h:form>
        </p:layoutUnit>
        <p:layoutUnit id="main_layout" position="center"  header="#{bundle.MainGestionePraticheTitle}">               
            <h:form id="mainMenuForm">                          
                <p:menubar>
                    <p:submenu label="Auto-Articolati" icon="ui-icon-home">
                        <p:menuitem id="aa_search"  value="Cerca..." icon="ui-icon-search" onclick="searchVeicoli()"/>
                        <p:menuitem id="aa_manage" value="Gestisci..." icon="ui-icon-wrench"/>
                    </p:submenu>                        
                    <p:submenu label="Pratica" icon="ui-icon-document">
                        <p:submenu label="Azioni" icon="fa fa-navicon">
                            <p:menuitem id="ap_new" value="Crea Nuova" icon="fa fa-plus"/>
                            <p:menuitem value="Salva" icon="fa fa-save" />
                            <p:menuitem value="Cancella" icon="fa fa-close" />                                
                        </p:submenu>
                        <p:separator title="Esporta Pratica"/>
                        <p:menuitem icon="fa fa-file-excel-o" value="File Excel..."/>
                    </p:submenu>                   
                    <f:facet name="options">
                        <p:commandButton id="print_module" value="Stampa Modulo" type="button" icon="ui-icon-print">
                            <p:printer target="tabview_pratiche" />
                        </p:commandButton>
                        <!-- ACTION BUTTONS -->
                        <p:commandButton  id="selectVeicoli" style="display: none"
                                          styleClass="commandButton" 
                                          actionListener="#{veicoliSearchView.chooseVeicoli}" >
                            <p:ajax event="dialogReturn" listener="#{veicoliSearchView.onVeicoliChosen}"
                                    update="growl pratiche_panel tabview_pratiche" />                            
                        </p:commandButton>  
                    </f:facet>
                </p:menubar>

                <p:tooltip id="t1" for="aa_search" value="Cerca auto e carica/crea le relative pratiche" position="top"/>
                <p:tooltip id="t2" for="aa_manage" value="Gestisce gli autoarticolati" position="top"/>
            </h:form>
            <p:panel id="pratiche_panel" 
                     header="#{not empty veicoliSearchView.selected ?
                               veicoliSearchView.selected.marca :
                               'Nessuna piattaforma/autoarticolato selezionato'}"
                     >
                <ui:include src="pratiche_list.xhtml"/>
            </p:panel>     
        </p:layoutUnit>
    </p:layout>
</html>

