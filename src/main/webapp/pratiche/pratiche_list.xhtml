<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html">
    <p:panelGrid layout="grid" columns="1" 
                 style="text-align: center !important; margin: 2em; font-weight: bold; font-size: 1.3em;">
        <p:outputLabel rendered="#{veicoliSearchView.pratiche.size()==0}">
            Nessuna pratica presente  
        </p:outputLabel>
    </p:panelGrid>
    <p:outputPanel rendered="#{not empty veicoliSearchView.selectedCar}">
        <div class="ui-g">
            <div class="ui-g-12 ui-md-4 ui-lg-4">
                <p:panelGrid id="general_grid_veicolo">       
                    <f:facet name="header">
                        <p:row>
                            <p:column colspan="4">
                                <h:form>
                                    Dati Piattaforma/auto-articolato
                                    <p:commandButton id="buttonVeicolo" icon="fa fa-edit"  />
                                    <p:tooltip id="toolTip" for="buttonVeicolo" position="top" 
                                               value="Modifica dati della piattaforma/auto-articolato" />
                                </h:form>
                            </p:column>
                        </p:row>
                    </f:facet>
                    <p:row>
                        <p:column colspan="1"  style="font-weight: bold;">
                            MARCA
                        </p:column>
                        <p:column class="col-value" colspan="1">
                            #{veicoliSearchView.selectedCar.marca}
                        </p:column>
                        <p:column colspan="1"  style="font-weight: bold;">
                            MODELLO
                        </p:column>
                        <p:column class="col-value" colspan="1">
                            #{veicoliSearchView.selectedCar.modello}
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column colspan="1"  style="font-weight: bold;">
                            ANNO
                        </p:column>
                        <p:column class="col-value" colspan="1">
                            #{veicoliSearchView.selectedCar.anno}
                        </p:column>
                        <p:column colspan="1"  style="font-weight: bold;">
                            PORTATA MAX.
                        </p:column>
                        <p:column class="col-value" colspan="1">
                            #{veicoliSearchView.selectedCar.portataMax}
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column colspan="1"  style="font-weight: bold;">
                            MATRICOLA / N.FABBRICA
                        </p:column>
                        <p:column class="col-value" colspan="1">
                            #{veicoliSearchView.selectedCar.matricola}
                        </p:column>
                        <p:column colspan="1"  style="font-weight: bold;">
                            TIPO
                        </p:column>
                        <p:column class="col-value" colspan="1">
                            #{veicoliSearchView.selectedCar.tipo}
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column colspan="1"  style="font-weight: bold;">
                            TARGA
                        </p:column>
                        <p:column class="col-value" colspan="1">
                            #{veicoliSearchView.selectedCar.targa}
                        </p:column>
                    </p:row>
                </p:panelGrid>
            </div>
            <div class="ui-g-12 ui-md-4 ui-lg-4">
                <p:panelGrid id="general_grid_cliente">       
                    <f:facet name="header">
                        <p:row>
                            <p:column colspan="2">
                                <h:form>
                                    Dati Cliente Attuale
                                    <p:commandButton id="buttonCliente" icon="fa fa-edit"  />
                                    <p:tooltip id="toolTip" for="buttonCliente" position="top" 
                                               value="Modifica dati del cliente" />
                                </h:form>
                            </p:column>
                        </p:row>
                    </f:facet>
                    <p:row>
                        <p:column colspan="1"  style="font-weight: bold;">
                            NOME/RAGIONE SOCIALE
                        </p:column>
                        <p:column colspan="1">                            
                            #{veicoliSearchView.selectedPratica.clienteidCliente.nome}
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column colspan="1"  style="font-weight: bold;">
                            COGNOME
                        </p:column>
                        <p:column colspan="1">
                            #{veicoliSearchView.selectedPratica.clienteidCliente.cognome}
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column colspan="1"  style="font-weight: bold;">
                            INDIRIZZO/LOCALITA'
                        </p:column>
                        <p:column colspan="1">
                            #{veicoliSearchView.selectedPratica.clienteidCliente.localita}
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column colspan="1"  style="font-weight: bold;">
                            RIFERIMENTO/TEL/CELLULARE
                        </p:column>
                        <p:column colspan="1">
                            #{veicoliSearchView.selectedPratica.clienteidCliente.cellulare}
                        </p:column>
                    </p:row>      
                </p:panelGrid>
            </div>
            <div class="ui-g-12 ui-md-4 ui-lg-4">
                <p:panelGrid id="general_grid_dati_temp">       
                    <f:facet name="header">
                        <p:row>
                            <p:column colspan="2">
                                <h:form>
                                    Dati da creazione temporanea pratica 
                                    <p:commandButton id="buttonDatiTemp" icon="fa fa-trash"  />
                                    <p:tooltip id="toolTip" for="buttonDatiTemp" position="top" 
                                               value="Ripulisce i dati temporanei della pratica" />
                                </h:form>
                            </p:column>
                        </p:row>
                    </f:facet>
                    <p:row>
                        <p:column colspan="1"  style="font-weight: bold;">
                            DATI CLIENTE
                        </p:column>
                        <p:column colspan="1">
                            #{veicoliSearchView.selectedPratica.clienteTemporaneo}
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column colspan="1"  style="font-weight: bold;">
                            DATI PIATTAFORMA / AUTOARTICOLATO
                        </p:column>
                        <p:column colspan="1">
                            #{veicoliSearchView.selectedPratica.veicoloTemporaneo}
                        </p:column>
                    </p:row>                                       
                </p:panelGrid>
            </div>
        </div>
    </p:outputPanel>
    <h:form>
        <p:selectBooleanCheckbox value="#{veicoliSearchView.selectedPratica.collaudoUsl}"/>
        <p:menubar>
            <p:menuitem value="Salva Pratica"
                        actionListener="#{veicoliSearchView.savePratica(veicoliSearchView.selectedPratica)}" 
                        icon="ui-icon-disk" />
        </p:menubar>
    </h:form>
    <p:tabView id="tabview_pratiche3" rendered="#{not empty veicoliSearchView.selectedCar}" scrollable="true">
        <p:tab title="dsaasd">
            <h:form>
                <p:selectBooleanCheckbox value="#{veicoliSearchView.selectedPratica.collaudoUsl}"/>
                <p:menubar>
                    <p:menuitem value="Salva Pratica"
                                actionListener="#{veicoliSearchView.savePratica(veicoliSearchView.selectedPratica)}" 
                                icon="ui-icon-disk" />
                </p:menubar>
            </h:form>
        </p:tab>
    </p:tabView>
    <p:tabView id="tabview_pratiche2" rendered="#{not empty veicoliSearchView.selectedCar}" 
               var="item" value="#{veicoliSearchView.pratiche}" scrollable="true" 
               activeIndex="#{veicoliSearchView.activeIndexTab}"
               >
        <p:ajax listener="#{veicoliSearchView.onTabChange}" event="tabChange" update="tabview_pratiche2"/>
        <p:tab title="asd">
            <h:form>
                <p:selectBooleanCheckbox value="#{veicoliSearchView.selectedPratica.collaudoUsl}"/>
                <p:menubar>
                    <p:menuitem value="Salva Pratica"
                                actionListener="#{veicoliSearchView.savePratica(veicoliSearchView.selectedPratica)}" 
                                icon="ui-icon-disk" />
                </p:menubar>
            </h:form>
        </p:tab>
    </p:tabView>

    <p:tabView id="tabview_pratiche" rendered="#{not empty veicoliSearchView.selectedCar}" 
               var="item" value="#{veicoliSearchView.pratiche}" scrollable="true">
        <p:ajax event="tabChange" listener="#{veicoliSearchView.onTabChange(item)}" update="@(.tab_pratiche_panel)"/>
        <p:tab id="tab_#{item.idPratica}" title="#{veicoliSearchView.getDate(item)}">
            <h:form>
                <p:selectBooleanCheckbox value="#{item.collaudoUsl}" itemLabel="item"/>
                <p:selectBooleanCheckbox value="#{veicoliSearchView.selectedPratica.collaudoUsl}" 
                                         itemLabel="bean"/>
                <p:menubar>
                    <p:menuitem value="Salva Pratica"
                                actionListener="#{veicoliSearchView.savePratica(item)}" 
                                icon="ui-icon-disk" />
                </p:menubar>
            </h:form>
            <p:accordionPanel styleClass="tab_pratiche_panel">                
                <p:tab title="Generale" >                   
                    <!--                    <ui:include src="/pratiche/tabs/generale.xhtml"/> -->
                </p:tab>
                <p:tab title="Lavori">

                </p:tab>
                <p:tab title="Materiale">

                </p:tab>
            </p:accordionPanel>
        </p:tab>
    </p:tabView>
</html>