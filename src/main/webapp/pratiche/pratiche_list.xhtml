<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html">
    <p:panelGrid layout="grid" columns="1" 
                 style="text-align: center !important; margin: 2em; font-weight: bold; font-size: 1.3em;">
        <p:outputLabel rendered="#{veicoliSearchView.praticheBean.list.size()==0}">
            Nessuna pratica presente  
        </p:outputLabel>
    </p:panelGrid>
    <p:outputPanel rendered="#{not empty veicoliSearchView.selected}">
        <div class="ui-g">
            <div class="ui-g-12 ui-md-4 ui-lg-4">
                <p:panelGrid id="general_grid_veicolo">       
                    <f:facet name="header">
                        <p:row>
                            <p:column colspan="4">
                                <h:form>
                                    Dati Piattaforma/auto-articolato
                                    <p:commandButton id="buttonVeicolo" icon="fa fa-edit"  />
                                    <p:tooltip id="toolTip" for="buttonVeicolo" position="top" 
                                               value="Modifica dati della piattaforma/auto-articolato" />
                                </h:form>
                            </p:column>
                        </p:row>
                    </f:facet>
                    <p:row>
                        <p:column colspan="1"  style="font-weight: bold;">
                            MARCA
                        </p:column>
                        <p:column class="col-value" colspan="1">
                            #{veicoliSearchView.selected.marca}
                        </p:column>
                        <p:column colspan="1"  style="font-weight: bold;">
                            MODELLO
                        </p:column>
                        <p:column class="col-value" colspan="1">
                            #{veicoliSearchView.selected.modello}
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column colspan="1"  style="font-weight: bold;">
                            ANNO
                        </p:column>
                        <p:column class="col-value" colspan="1">
                            #{veicoliSearchView.selected.anno}
                        </p:column>
                        <p:column colspan="1"  style="font-weight: bold;">
                            PORTATA MAX.
                        </p:column>
                        <p:column class="col-value" colspan="1">
                            #{veicoliSearchView.selected.portataMax}
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column colspan="1"  style="font-weight: bold;">
                            MATRICOLA / N.FABBRICA
                        </p:column>
                        <p:column class="col-value" colspan="1">
                            #{veicoliSearchView.selected.matricola}
                        </p:column>
                        <p:column colspan="1"  style="font-weight: bold;">
                            TIPO
                        </p:column>
                        <p:column class="col-value" colspan="1">
                            #{veicoliSearchView.selected.tipo}
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column colspan="1"  style="font-weight: bold;">
                            TARGA
                        </p:column>
                        <p:column class="col-value" colspan="1">
                            #{veicoliSearchView.selected.targa}
                        </p:column>
                    </p:row>
                </p:panelGrid>
            </div>
            <div class="ui-g-12 ui-md-4 ui-lg-4">
                <p:panelGrid id="general_grid_cliente">       
                    <f:facet name="header">
                        <p:row>
                            <p:column colspan="2">
                                <h:form>
                                    Dati Cliente 
                                    <p:commandButton id="buttonCliente" icon="fa fa-edit"  />
                                    <p:tooltip id="toolTip" for="buttonCliente" position="top" 
                                               value="Modifica dati del cliente" />
                                </h:form>
                            </p:column>
                        </p:row>
                    </f:facet>
                    <p:row>
                        <p:column colspan="1"  style="font-weight: bold;">
                            NOME/RAGIONE SOCIALE
                        </p:column>
                        <p:column colspan="1">
                            #{veicoliSearchView.praticheBean.selected.clienteidCliente.nome}
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column colspan="1"  style="font-weight: bold;">
                            COGNOME
                        </p:column>
                        <p:column colspan="1">
                            #{veicoliSearchView.praticheBean.selected.clienteidCliente.cognome}
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column colspan="1"  style="font-weight: bold;">
                            INDIRIZZO/LOCALITA'
                        </p:column>
                        <p:column colspan="1">
                            #{veicoliSearchView.praticheBean.selected.clienteidCliente.localita}
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column colspan="1"  style="font-weight: bold;">
                            RIFERIMENTO/TEL/CELLULARE
                        </p:column>
                        <p:column colspan="1">
                            #{veicoliSearchView.praticheBean.selected.clienteidCliente.cellulare}
                        </p:column>
                    </p:row>      
                </p:panelGrid>
            </div>
            <div class="ui-g-12 ui-md-4 ui-lg-4">
                <p:panelGrid id="general_grid_dati_temp">       
                    <f:facet name="header">
                        <p:row>
                            <p:column colspan="2">
                                <h:form>
                                    Dati da creazione temporanea pratica 
                                    <p:commandButton id="buttonDatiTemp" icon="fa fa-trash"  />
                                    <p:tooltip id="toolTip" for="buttonDatiTemp" position="top" 
                                               value="Ripulisce i dati temporanei della pratica" />
                                </h:form>
                            </p:column>
                        </p:row>
                    </f:facet>
                    <p:row>
                        <p:column colspan="1"  style="font-weight: bold;">
                            DATI CLIENTE
                        </p:column>
                        <p:column colspan="1">
                            #{veicoliSearchView.praticheBean.selected.clienteTemporaneo}
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column colspan="1"  style="font-weight: bold;">
                            DATI PIATTAFORMA / AUTOARTICOLATO
                        </p:column>
                        <p:column colspan="1">
                            #{veicoliSearchView.praticheBean.selected.veicoloTemporaneo}
                        </p:column>
                    </p:row>                                       
                </p:panelGrid>
            </div>
        </div>
    </p:outputPanel>    
    <p:tabView id="tabview_pratiche" rendered="#{not empty veicoliSearchView.selected}" 
               var="item" value="#{veicoliSearchView.praticheBean.list}" scrollable="true">
        <p:ajax event="tabChange" listener="#{veicoliSearchView.onTabChange(item)}" update="@(.tab_pratiche_panel)"/>
        <p:tab id="tab_#{item.idPratica}" 
               title="#{veicoliSearchView.praticheBean.getDate(item)}">
            <h:form>
                <p:menubar>
                    <p:menuitem value="Salva Pratica"
                                actionListener="#{veicoliSearchView.savePratica()}" 
                                icon="ui-icon-disk" />
                </p:menubar>
                <p:accordionPanel styleClass="tab_pratiche_panel">
                    <p:tab title="Generale">
                        <ui:include src="/pratiche/tabs/generale.xhtml"/>
                    </p:tab>
                    <p:tab title="Lavori">

                    </p:tab>
                    <p:tab title="Materiale">

                    </p:tab>
                </p:accordionPanel>
            </h:form>
        </p:tab>
    </p:tabView>
</html>